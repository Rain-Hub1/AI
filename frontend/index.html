<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA de Aprendizagem</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ§  IA de Aprendizagem</h1>
            <p>DÃª um tÃ³pico para a IA pesquisar, ler e aprender.</p>
        </header>
        <div class="input-section">
            <input type="text" id="topic-input" placeholder="Ex: Buracos negros">
            <button id="learn-button">Aprender</button>
        </div>
        <div class="results-section">
            <h2>Resultados</h2>
            <div id="status">Aguardando um tÃ³pico...</div>
            <ul id="results-list"></ul>
        </div>
    </div>
    <script>
        // â–¼â–¼â–¼ VOCÃŠ VAI EDITAR ESTA LINHA NO PASSO 5 â–¼â–¼â–¼
        const BACKEND_URL = 'https://ai-test-m37m.onrender.com/aprender';
        // â–²â–²â–² VOCÃŠ VAI EDITAR ESTA LINHA NO PASSO 5 â–²â–²â–²

        const topicInput = document.getElementById('topic-input');
        const learnButton = document.getElementById('learn-button');
        const statusDiv = document.getElementById('status');
        const resultsList = document.getElementById('results-list');

        learnButton.addEventListener('click', async () => {
            const topic = topicInput.value.trim();
            if (!topic) {
                statusDiv.textContent = 'Por favor, digite um tÃ³pico.';
                return;
            }
            learnButton.disabled = true;
            statusDiv.innerHTML = '<div class="loader"></div>';
            resultsList.innerHTML = '';
            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ topic: topic }),
                });
                const data = await response.json();
                statusDiv.textContent = '';
                if (data.error) {
                    statusDiv.textContent = `Erro: ${data.error}`;
                } else {
                    if (data.conhecimento_previo && data.conhecimento_previo.length > 0) {
                        const prevHeader = document.createElement('li');
                        prevHeader.innerHTML = '<strong>ðŸ’¡ Conhecimento PrÃ©vio:</strong>';
                        resultsList.appendChild(prevHeader);
                        data.conhecimento_previo.forEach(fato => {
                            const li = document.createElement('li');
                            li.textContent = fato;
                            resultsList.appendChild(li);
                        });
                    }
                    const newHeader = document.createElement('li');
                    newHeader.innerHTML = `<strong>âœ… ${data.mensagem}</strong>`;
                    resultsList.appendChild(newHeader);
                    if (data.fonte) {
                        const fonteLi = document.createElement('li');
                        fonteLi.innerHTML = `ðŸ”— Fonte: <a href="${data.fonte}" target="_blank" rel="noopener noreferrer">${data.fonte}</a>`;
                        resultsList.appendChild(fonteLi);
                    }
                }
            } catch (error) {
                statusDiv.textContent = 'Ocorreu um erro de comunicaÃ§Ã£o com o servidor. Verifique se a URL do backend estÃ¡ correta.';
            } finally {
                learnButton.disabled = false;
            }
        });
    </script>
</body>
</html>
